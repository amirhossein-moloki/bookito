# مستندات API فیلتر کتاب‌ها

**Base URL**: `http://localhost:8000/books/filter/`

تمام درخواست‌ها با متد `GET` ارسال می‌شوند و فیلترهای زیر از طریق پارامترهای کوئری (Query Params) قابل اعمال هستند. تمامی پارامترها اختیاری بوده و می‌توان از هر ترکیبی از آن‌ها استفاده کرد.

---

## 📑 پارامترهای فیلتر

### ۱. ژانر
- **پارامتر**: `genre`  
- **نوع**: `string`  
- **شرح**: جستجو بر اساس نام ژانر (غیر حساس به حروف کوچک/بزرگ).  
- **مثال**: `?genre=رمان`

### ۲. زبان
- **پارامتر**: `language`  
- **نوع**: `string`  
- **شرح**: جستجو بر اساس نام زبان کتاب.  
- **مثال**: `?language=فارسی`

### ۳. مترجم
1. **نام کامل مترجم**  
   - پارامتر: `translator_name`  
   - نوع: `string`  
   - متد: `filter_translator_by_full_name`  
   - شرح: ورودی شامل نام و نام خانوادگی مترجم است و جستجو بر اساس هر دو فیلد انجام می‌شود.  
   - مثال: `?translator_name=علی رضایی`

2. **نام کوچک مترجم**  
   - پارامتر: `translator_first_name`  
   - نوع: `string`  
   - شرح: جستجو بر اساس فیلد `translators__first_name`.  
   - مثال: `?translator_first_name=علی`

3. **نام خانوادگی مترجم**  
   - پارامتر: `translator_last_name`  
   - نوع: `string`  
   - شرح: جستجو بر اساس فیلد `translators__last_name`.  
   - مثال: `?translator_last_name=رضایی`

### ۴. نویسنده
1. **نام کامل نویسنده**  
   - پارامتر: `author_name`  
   - نوع: `string`  
   - متد: `filter_author_by_full_name`  
   - شرح: ورودی شامل نام و نام خانوادگی نویسنده است و جستجو بر اساس هر دو فیلد انجام می‌شود.  
   - مثال: `?author_name=عباس محمودی`

2. **نام کوچک نویسنده**  
   - پارامتر: `first_name`  
   - نوع: `string`  
   - شرح: جستجو بر اساس فیلد `authors__first_name`.  
   - مثال: `?first_name=عباس`

3. **نام خانوادگی نویسنده**  
   - پارامتر: `last_name`  
   - نوع: `string`  
   - شرح: جستجو بر اساس فیلد `authors__last_name`.  
   - مثال: `?last_name=محمودی`

### ۵. ناشر
- **پارامتر**: `publisher`  
- **نوع**: `string`  
- **شرح**: جستجو بر اساس نام ناشر.  
- **مثال**: `?publisher=نیلوفر`

### ۶. قیمت
- **پارامتر**: `price_min`  
  - نوع: `number`  
  - شرح: حداقل قیمت (تومان).  
  - مثال: `?price_min=100000`
- **پارامتر**: `price_max`  
  - نوع: `number`  
  - شرح: حداکثر قیمت (تومان).  
  - مثال: `?price_max=500000`

### ۷. تاریخ انتشار
- **پارامتر**: `publication_date_min`  
  - نوع: `date` (YYYY-MM-DD)  
  - شرح: تاریخ انتشار بعد از یا برابر.  
  - مثال: `?publication_date_min=2020-01-01`
- **پارامتر**: `publication_date_max`  
  - نوع: `date` (YYYY-MM-DD)  
  - شرح: تاریخ انتشار قبل از یا برابر.  
  - مثال: `?publication_date_max=2023-12-31`

### ۸. تخفیف و امتیاز
- **پارامتر**: `discount_min`  
  - نوع: `number`  
  - شرح: حداقل درصد تخفیف.  
  - مثال: `?discount_min=10`
- **پارامتر**: `discount_max`  
  - نوع: `number`  
  - شرح: حداکثر درصد تخفیف.  
  - مثال: `?discount_max=50`
- **پارامتر**: `rating_min`  
  - نوع: `number`  
  - شرح: حداقل امتیاز (0.00–10.00).  
  - مثال: `?rating_min=4.5`
- **پارامتر**: `rating_max`  
  - نوع: `number`  
  - شرح: حداکثر امتیاز.  
  - مثال: `?rating_max=5.0`

### ۹. موجودی
- **پارامتر**: `in_stock`  
- **نوع**: `boolean`  
- **متد**: `filter_in_stock`  
- **شرح**: در صورت مقدار `true`، تنها کتاب‌هایی که موجودی (`stock`) آن‌ها بیشتر از صفر است نمایش داده می‌شوند.  
- **مثال**: `?in_stock=true`

---

## 🚀 نمونه درخواست‌ها

1. فیلتر نویسنده بر اساس نام کوچک:
```bash
GET http://localhost:8000/books/filter/?first_name=عباس
```

2. فیلتر مترجم بر اساس نام کامل:
```bash
GET http://localhost:8000/books/filter/?translator_name=علی رضایی
```

3. فیلتر ترکیبی ژانر و قیمت:
```bash
GET http://localhost:8000/books/filter/?genre=رمان&price_min=100000&price_max=300000
```

4. فیلتر همه کتاب‌های موجود با تخفیف حداقل 20%:
```bash
GET http://localhost:8000/books/filter/?in_stock=true&discount_min=20
```

---

**نکات مهم**:
- تمام فیلترها **اختیاری** هستند. اگر هیچ پارامتری ارسال نکنید، تمامی کتاب‌ها برگردانده می‌شوند.
- فیلدهای متنی به صورت **case-insensitive** جستجو می‌شوند.
- فرمت تاریخ باید `YYYY-MM-DD` باشد.

---

> این مستند برای توسعه و تست در محیط محلی (`localhost:8000`) تهیه شده است. برای محیط تولید، آدرس Base URL را مطابق تنظیمات سرور به‌روز کنید.

